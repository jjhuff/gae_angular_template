<div ng-controller="ResetPasswordCtrl" class="reset_password" cg-busy="promise">
    <h2>Reset Password</h2>

    <form novalidate role="form" name="passwordForm">
        <div class="form-group"  ng-class="{'has-error': passwordForm.password.showError && passwordForm.password.$invalid}">
            <label for="updatePassword">New Password</label>
            <input type="password" class="form-control" id="updatePassword" name="password" ng-model="pass.new" ng-minlength="7" required>
            <span class="help-block error" ng-show="passwordForm.password.hasVisited && passwordForm.password.$error.minlength">Password is too short (minimum is 7 characters)</span>
        </div>
        <div class="form-group"  ng-class="{'has-error': passwordForm.password_conf.showError && passwordForm.password_conf.$invalid}">
            <label for="updatePasswordConf">New Password (again)</label>
            <input type="password" class="form-control" id="updatePasswordConf" name="password_conf" ng-model="pass.new_conf" required match="pass.new">
            <span class="help-block error" ng-show="passwordForm.password_conf.hasVisited && passwordForm.password_conf.$error.match">Passwords don't match</span>
        </div>

        <div class="alert alert-danger" ng-show="error==403">Expired or invalid request.</div>
        <div class="alert alert-warning" ng-show="error && error!=403">Unknown Error. Please try again.</div>
        <button class="btn btn-primary btn-lg" ng-click="savePassword()" ng-disabled="passwordForm.$invalid">Reset Password</button>
    </form>
</div>
